<!doctype html>
<html lang="es-MX">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link href="assets/css/styles.css" rel="stylesheet">
    <link href="assets/css/hover-min.css" rel="stylesheet">
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css' rel='stylesheet'/>
    <title>Observatorio de la Laguna / OCIs</title>
</head>
<body class="d-flex flex-column min-vh-100">
<header>
    <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="assets/img/navbar.png" alt="USAID LOGO" class="d-inline-block align-top logo-navbar">
            </a>
            <div class="logo-title-navbar">
                <strong class="brand-color">&ensp;OCIs</strong>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active hvr-underline-from-left" aria-current="page" href="#">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hvr-underline-from-left" href="#">¿Quiénes somos?</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hvr-underline-from-left" href="#">Mediciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hvr-underline-from-left" href="#">Encuesta</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hvr-underline-from-left" href="#">Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<content id="app">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm" id="map"></div>
            <div class="col-sm">
            </div>
        </div>
    </div>
</content>
<footer class="mt-auto">
    <div class="d-flex justify-content-center">
        <strong class="brand-color">Patrocinadores</strong>
    </div>
</footer>

<script src='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js'></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"
        integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"
        integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG"
        crossorigin="anonymous"></script>
<script>
    (function () {
        mapboxgl.accessToken = 'pk.eyJ1IjoiY2FyZGVuYXMzMTQiLCJhIjoiY2tsYnI5eHBpMGpvMzJ4bzNwbnpjMzhjNSJ9.h-U-v67HDVSa8DXcmmYapw';
        var map;
        var hoveredStateId;
        let app = new Vue({
            el: '#app',
            data: {},
            created: function () {
            },
            mounted: function () {
                map = new mapboxgl.Map({
                    container: 'map',
                    style: 'mapbox://styles/mapbox/streets-v11',
                    center: [-101.275,27.544],
                    zoom: 6
                });
                hoveredStateId = null;
                map.on('load', function (){
                    map.addSource('states', {
                        'type': 'geojson',
                        'data': ''
                    });
                    map.addLayer({
                        'id': 'state-fills',
                        'type': 'fill',
                        'source': 'states',
                        'layout': {},
                        'paint': {
                            'fill-color': '#09306C',
                            'fill-opacity': [
                                'case',
                                ['boolean', ['feature-state', 'hover'], false],
                                1,
                                0.5
                            ]
                        }
                    });
                    map.addLayer({
                        'id': 'state-borders',
                        'type': 'line',
                        'source': 'states',
                        'layout': {},
                        'paint': {
                            'line-color': '#627BC1',
                            'line-width': 2
                        }
                    });
                });
                map.on('mousemove', 'state-fills', function (e) {
                    if (e.features.length > 0) {
                        if (hoveredStateId) {
                            map.setFeatureState(
                                { source: 'states', id: hoveredStateId },
                                { hover: false }
                            );
                        }
                        hoveredStateId = e.features[0].id;
                        map.setFeatureState(
                            { source: 'states', id: hoveredStateId },
                            { hover: true }
                        );
                    }
                });
                map.on('mouseleave', 'state-fills', function () {
                    if (hoveredStateId) {
                        map.setFeatureState(
                            { source: 'states', id: hoveredStateId },
                            { hover: false }
                        );
                    }
                    hoveredStateId = null;
                });
            },
            methods: {

            }
        })
    })();
</script>
</body>
</html>
